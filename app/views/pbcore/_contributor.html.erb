<%
  # On create (with AJAX): contributor_counter and contributor variables come from the controller
  # Eveything else: they come from the defaults in the render call
  contributor_name = get_values_from_datastream(@document_fedora,'descMetadata', [{:contributor_name=>contributor_counter}]).first
  base_id = "contributor_#{contributor_counter}"
%>

<li>
  <% if params[:action] == "edit" %>
    <!-- multiple needs to be explicitly set to FALSE. For some reason, it's getting set to TRUE -->
    <%= fedora_text_field(@document_fedora, "descMetadata", [{:contributor_name=>contributor_counter}], {:size=>40, :multiple=>FALSE}) %>
    <%= fedora_select(@document_fedora,"descMetadata", [{:contributor_role=>contributor_counter}], :choices=>Relators.marc.keys.sort).html_safe %>
  <% else %>
    <span>
      <%= get_values_from_datastream(@document_fedora, "descMetadata", [{:contributor_name=>contributor_counter}]) %>,
      <%= contributor_link(contributor_counter) %>
    </span>
  <% end %>
</li>


