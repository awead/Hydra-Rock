<%
  # On create: genre_counter and genre variables come from the controller
  # On edit: they come from the defaults in the render call
  genre_name = get_values_from_datastream(@document_fedora,'descMetadata', [{:genre=>genre_counter}]).first
  base_id = "genre_#{genre_counter}"
%>

<li>
  <% if params[:action] == "edit" %>
    <%= fedora_text_field(@document_fedora, "descMetadata", [{:genre=>genre_counter}], {:size=>"20", :multiple=>FALSE}) %>
    <%= fedora_select(@document_fedora, "descMetadata", [{:genre=>genre_counter}, :ref], :choices=>Relators.lc, :include_blank => true).html_safe %>
  <% else %>
    <%= get_values_from_datastream(@document_fedora, "descMetadata", [{:genre=>genre_counter}]) %>
  <% end %>
<li>